# 도메인 주도 개발 시작하기

## Chapter 1. 도메인 모델 시작하기
> 도메인 모델, 엔티티 및 밸류에 대해 이해한다.

### 개요
- 1.1 도메인이란?
- 1.2 도메인 전문가와 개발자 간 지식 공유
- 1.3 도메인 모델
- 1.4 도메인 모델 패턴
- 1.5 도메인 모델 도출
- 1.6 엔티티와 밸류
- 1.7 도메인 용어와 유비쿼터스 언어


### 1.1 도메인이란?
- 소프트웨어로 해결하고자 하는 문제 영역을 말한다.
- 한 도메인은 하위 도메인으로 나눌 수 있으며, 각 도메인들과 서로 연동하여 완전한 기능을 제공한다.
- 예시로 온라인 쇼핑몰이라는 도메인 하위에 주문, 결제, 배송, 혜택 등 하위 도메인들이 존재한다. 
  - 주문 도메인은 자연스럽게 결제, 배송, 혜택 등 도메인들과 연결된다.

### 1.2 도메인 전문가와 개발자 간 지식 공유
- 소프트웨어를 설계할 때 요구사항을 올바르게 이해하는 것이 중요하다.
  - 요구사항을 정확하게 이해하지 못하면 변경점이 많아지고 일정이 딜레이  될 수 있다.
- 개발자와 도메인 전문가 사이에 전달자가 많으면 자연스럽게 정보의 왜곡가 손실이 발생하기에 직접 대화하는 편이 좋다.
- 따라서 개발자도 도메인 지식을 갖추는 것이 중요하다.

### 1.3 도메인 모델
- 도메인 모델링은 도메인이 제공하는 기능과 데이터 구성 파악 등 상황에 따라 여러 방식으로 표현 될 수 있다.
  - 객체 기반 도메인 모델
  - 상태 다이어그램 기반 모델
    
### 1.4 도메인 모델 패턴
- 도메인 모델은 아키텍처 상의 도메인 계층을 객체지향 기법으로 구현하는 패턴을 말한다.
- 도메인 모델에게 필요한 코드는 도메인 객체 내부에 구현하는 방식을 말한다.
  - order.update()
- 처음부터 완벽한 도메인 모델 설계는 매우 힘들기 때문에, 전반적인 개요를 알 수 있는 수준으로 작성하고 구현 과정에서 점진적으로 발전시켜 나가도록 한다.

### 1.5 도메인 모델 도출
- 도메인을 모델링 할 때 기본이 되는 작업은 모델을 구성하는 핵심 구성요소, 규칙, 기능을 찾는 것이다.
  - 기획서를 보고 필요한 기능, 이슈 포인트 등을 고려하여 설계한다.
- 문서화 자체도 중요하지만, 코드 자체도 도메인 관점에서 잘 표현해야 가독성도 높아지며 문서로서 코드가 의미를 갖는다.

### 1.6 엔티티와 밸류
- 모델은 크게 엔티티와 밸류로 구분한다.
- 엔티티의 가장 큰 특징은 식별자를 가진다는 것이다. (예시 - 주문번호)
  - 엔티티의 식별자는 바뀌지 않고 고유하기 때문에 두 엔티티 객체의 식별자가 같으면 두 엔티티는 같다고 판단 할 수 있다.
- 엔티티의 식별자를 생성하는 시점은 도메인의 특징과 사용하는 기술에 따라 달라진다.
  - 특정 규칙에 따라 생성
  - UUID 또는 Nano ID와 같은 고유 식별자 생성기 사용
  - 값을 직접 입력(예시 - 회원의 아이디나 이메일)
  - 일련번호 사용(시퀀스나 DB의 자동 증가 컬럼 사용)
- 밸류 타입은 별도의 식별자가 없고, 객체 자체로 의미를 명확히 표현 가능하게 한다.
  - 예시 - Address, Money 등
- 밸류 타입의 장점은 밸류 타입을 위한 기능을 추가할 수 있다는 점이다.
  - 예시 - 전체 금액 구하기 : price * quantity -> price.multiply(quantity)
- 객체를 불변(immutable)하게 구현하는 것은 아래와 같은 장점을 가진다.
  - 변경에 불가하여 안전한 설계가 가능함(사이드 이펙트 차단)
  - 참조 투명성과 스레드에 안전한 특징을 가짐
- 명확한 이유가 있는게 아니라면 setter 사용을 지양하고, 필요한 필드를 모두 포함하여 생성자로 강제하도록 한다.
  - 도메인 객체가 불완전한 상태로 사용되는 것을 막을 수 있다.(특정 필드를 채우지 않고 객체 생성하는 경우)

### 1.7 도메인 용어와 유비쿼터스 언어
- 도메인에서 사용하는 용어를 코드에 반영하여, 코드만 읽어도 자연스럽게 이해하는 방향으로 가야한다.
  - 예시 - Enum 사용시 STEP1, STEP2와 같이 사용하지 않고 명확하게 READY, PAID 등으로 표현 

<br>

## Reference
- 최범균 - 도메인 주도 개발 시작하기
